import{j as e}from"./index-DEaKLXWb.js";import{r as a}from"./vendor-Cg3t72uT.js";import{o as t,a as r,s,b as l,d}from"./firebase-CsTPUANe.js";import{r as n,o,p as i,a as g}from"./firebase-coe4MofA.js";import"./utils-CrM1Z76V.js";const b=()=>{const[b,c]=a.useState(null),[m,u]=a.useState([]),[x,h]=a.useState(null),[p,y]=a.useState(""),[f,j]=a.useState(""),[w,k]=a.useState(""),[N,v]=a.useState(!1);a.useEffect(()=>{const e=t(r,e=>{h(e)});return()=>e()},[]),a.useEffect(()=>{if(x){const e=n(d,"templates"),a=o(e,e=>{const a=e.val(),t=a?Object.keys(a).map(e=>({id:e,...a[e]})):[];u(t)});return()=>a()}},[x]);const S=async e=>{e.preventDefault(),v(!0),k("");try{await s(r,p,f)}catch(a){k("Login failed: "+(a.message||a.code))}v(!1)};return x?e.jsxs("div",{className:"container mx-auto p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Upload New Meme Template"}),e.jsx("button",{onClick:async()=>{await l(r)},className:"bg-gray-700 hover:bg-gray-900 text-white font-bold py-2 px-4 rounded",children:"Logout"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg",children:[e.jsx("input",{type:"file",onChange:e=>{c(e.target.files[0])},className:"mb-4 text-gray-900 dark:text-gray-300"}),e.jsx("button",{onClick:()=>{if(b){const e=new FileReader;e.onload=e=>{const a=e.target.result,t=n(d,"templates");i(t,{name:b.name,url:a}),alert("Template uploaded successfully!"),c(null)},e.readAsDataURL(b)}},disabled:!b,className:"bg-blue-500 hover:bg-blue-700 dark:bg-blue-600 dark:hover:bg-blue-700 text-white font-bold py-2 px-4 rounded disabled:bg-gray-400",children:"Upload Template"})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-900 dark:text-white",children:"Manage Templates"}),m.length>0?e.jsx("ul",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg",children:m.map(a=>e.jsxs("li",{className:"flex justify-between items-center py-2 border-b dark:border-gray-700",children:[e.jsx("span",{className:"text-gray-900 dark:text-gray-200",children:a.name}),e.jsx("button",{onClick:()=>(e=>{const a=n(d,`templates/${e}`);g(a)})(a.id),className:"bg-red-500 hover:bg-red-700 dark:bg-red-600 dark:hover:bg-red-700 text-white font-bold py-1 px-3 rounded",children:"Delete"})]},a.id))}):e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No templates found."})]})]}):e.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-100 dark:bg-gray-900",children:e.jsxs("form",{onSubmit:S,className:"bg-white dark:bg-gray-800 p-8 rounded shadow-md w-80",children:[e.jsx("h2",{className:"text-xl font-bold mb-4 text-center text-gray-900 dark:text-white",children:"Admin Login"}),w&&e.jsx("div",{className:"text-red-500 dark:text-red-400 mb-2",children:w}),e.jsx("input",{type:"email",value:p,onChange:e=>y(e.target.value),placeholder:"Email",className:"w-full mb-2 p-2 border rounded bg-white dark:bg-gray-700 dark:border-gray-600 text-gray-900 dark:text-white",required:!0}),e.jsx("input",{type:"password",value:f,onChange:e=>j(e.target.value),placeholder:"Password",className:"w-full mb-4 p-2 border rounded bg-white dark:bg-gray-700 dark:border-gray-600 text-gray-900 dark:text-white",required:!0}),e.jsx("button",{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-700 dark:bg-blue-600 dark:hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",disabled:N,children:N?"Logging in...":"Login"})]})})};export{b as default};
