import{j as e,c as s,g as t,e as a,h as r,i as l,u as n,k as i,l as d,p as o,m as c,n as x,r as h,A as g}from"./index-CyZx3RiQ.js";import{R as m,r as b}from"./vendor-Cg3t72uT.js";import"./utils-CrM1Z76V.js";import"./firebase-DOVT3bkn.js";const u=new Map;const j=m.memo(({nft:t,onVote:a,isVoting:r,showStats:l=!1})=>{if(!t)return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 animate-pulse",children:[e.jsx("div",{className:"w-full h-64 bg-gray-300 dark:bg-gray-600 rounded-lg mb-4"}),e.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded mb-2"}),e.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded w-2/3"})]});return e.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden flex flex-col h-full transition-all duration-200 ${a?"cursor-pointer hover:shadow-xl hover:scale-[1.02] hover:ring-2 hover:ring-blue-500":""} ${r?"opacity-75 cursor-not-allowed":""}`,onClick:a&&!r?()=>{!r&&a&&a(t.tokenId)}:void 0,children:[e.jsxs("div",{className:"relative",style:{paddingTop:"100%"},children:[e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 dark:bg-gray-700 overflow-hidden",children:e.jsx("img",{src:s(t.image)||"https://via.placeholder.com/400x400?text=Loading...",alt:t.name,className:"max-w-full max-h-full object-contain p-2",style:{width:"100%",height:"100%",objectFit:"contain",objectPosition:"center"},loading:"lazy",onError:e=>{if(e.target.onerror=null,t){((e,s,t)=>{const a=s||e;u.has(a)||u.set(a,{tokenId:s,imageUrl:e,firstSeen:(new Date).toISOString(),occurrences:0,contexts:new Set});const r=u.get(a);r.occurrences++,r.lastSeen=(new Date).toISOString(),r.contexts.add(t),r.occurrences})(e.target.src,t.tokenId,"NFTCard"+(l?"-Stats":a?"-Voting":""));const r=s(e.target.src);if(r&&r!==e.target.src)return void(e.target.src=r)}const r=t&&t.tokenId?`MetaHero+%23${t.tokenId}+Image+Not+Available`:"Image+Not+Available";e.target.src=`https://via.placeholder.com/400x400?text=${r}`}})}),l&&e.jsxs("div",{className:"absolute top-2 right-2 bg-black bg-opacity-75 text-white px-2 py-1 rounded text-sm",children:["Elo: ",t.elo_score||"N/A"]})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:t.name}),l&&e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-400 mb-3",children:[e.jsxs("span",{children:["Wins: ",t.wins]}),e.jsxs("span",{children:["Losses: ",t.losses]}),e.jsxs("span",{children:["Total: ",t.total_votes]})]}),e.jsxs("a",{href:t.opensea_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center px-4 py-3 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-b-lg transition-colors duration-200 group",title:"View on OpenSea",onClick:e=>e.stopPropagation(),children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-200 group-hover:text-blue-500 transition-colors mr-1",children:"View on"}),e.jsx("div",{className:"relative h-4 flex items-center",children:e.jsxs("svg",{width:"116",height:"30",viewBox:"0 0 1160 302",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"h-4",children:[e.jsxs("g",{clipPath:"url(#clip0_1_4)",children:[e.jsx("path",{d:"M285 142C285 217.111 224.111 278 149 278C73.8893 278 13 217.111 13 142C13 66.8893 73.8893 5.99999 149 5.99999C224.111 5.99999 285 66.8893 285 142Z",fill:"white"}),e.jsx("path",{d:"M151.805 0.50158C67.6505 -0.200753 -0.701546 68.1513 0.000786814 152.306C0.70312 234.027 67.4749 300.799 149.171 301.476C233.326 302.204 301.703 233.827 300.976 149.672C300.298 67.9758 233.527 1.20391 151.805 0.50158ZM106.806 75.4004C116.438 87.6411 122.207 103.118 122.207 119.923C122.207 134.472 117.892 148.017 110.468 159.329H58.2944L106.806 75.4004ZM265.884 177.916C265.884 178.618 265.508 179.22 264.856 179.496C261.319 181.001 249.655 186.419 244.789 193.167C232.272 210.6 222.716 237.991 201.345 237.991H112.173C80.5935 237.991 54.1808 212.932 54.2059 179.546C54.2059 178.719 54.9082 178.041 55.7359 178.041H98.0014C99.4562 178.041 100.61 179.22 100.61 180.65V188.802C100.61 193.142 104.122 196.653 108.461 196.653H140.518V177.991H118.62C131.212 162.038 138.712 141.896 138.712 119.973C138.712 95.5172 129.33 73.2182 113.979 56.5377C123.26 57.6163 132.14 59.4725 140.518 61.9307V56.7384C140.518 51.3455 144.882 46.981 150.275 46.981C155.668 46.981 160.032 51.3455 160.032 56.7384V69.255C189.957 83.2264 209.547 106.403 209.547 132.615C209.547 147.992 202.825 162.314 191.211 174.354C188.979 176.662 185.893 177.966 182.658 177.966H160.032V196.603H188.427C194.547 196.603 205.534 184.989 210.751 177.991C210.751 177.991 210.977 177.64 211.579 177.464C212.181 177.289 263.727 165.45 263.727 165.45C264.805 165.149 265.884 165.976 265.884 167.08V177.916Z",fill:"#0086FF"})]}),e.jsx("path",{d:"M423.245 216.309C411.338 216.309 400.403 213.514 390.44 207.925C380.477 202.336 372.58 194.621 366.748 184.779C360.916 174.816 358 163.578 358 151.063C358 138.67 360.916 127.553 366.748 117.711C372.58 107.748 380.477 99.9725 390.44 94.3835C400.403 88.7945 411.338 86 423.245 86C435.274 86 446.209 88.7945 456.05 94.3835C466.013 99.9725 473.85 107.748 479.561 117.711C485.393 127.553 488.309 138.67 488.309 151.063C488.309 163.578 485.393 174.816 479.561 184.779C473.85 194.621 466.013 202.336 456.05 207.925C446.087 213.514 435.152 216.309 423.245 216.309ZM423.245 193.527C430.9 193.527 437.643 191.826 443.475 188.424C449.307 184.901 453.863 179.919 457.144 173.48C460.424 167.04 462.065 159.568 462.065 151.063C462.065 142.558 460.424 135.147 457.144 128.829C453.863 122.389 449.307 117.468 443.475 114.066C437.643 110.664 430.9 108.963 423.245 108.963C415.591 108.963 408.787 110.664 402.833 114.066C397.001 117.468 392.445 122.389 389.165 128.829C385.884 135.147 384.244 142.558 384.244 151.063C384.244 159.568 385.884 167.04 389.165 173.48C392.445 179.919 397.001 184.901 402.833 188.424C408.787 191.826 415.591 193.527 423.245 193.527Z",fill:"currentColor",className:"text-gray-700 dark:text-gray-200 group-hover:text-blue-500"}),e.jsx("path",{d:"M525.516 128.646C528.797 124.029 533.292 120.202 539.003 117.165C544.835 114.006 551.456 112.426 558.868 112.426C567.494 112.426 575.27 114.552 582.196 118.805C589.243 123.057 594.771 129.132 598.781 137.03C602.912 144.806 604.977 153.858 604.977 164.185C604.977 174.513 602.912 183.686 598.781 191.705C594.771 199.602 589.243 205.738 582.196 210.112C575.27 214.486 567.494 216.673 558.868 216.673C551.456 216.673 544.895 215.154 539.185 212.117C533.596 209.079 529.04 205.252 525.516 200.635V263.147H500.001V114.066H525.516V128.646ZM578.915 164.185C578.915 158.11 577.64 152.886 575.088 148.512C572.658 144.016 569.378 140.614 565.247 138.306C561.237 135.997 556.863 134.843 552.125 134.843C547.508 134.843 543.134 136.058 539.003 138.488C534.993 140.796 531.713 144.198 529.161 148.694C526.731 153.189 525.516 158.475 525.516 164.55C525.516 170.625 526.731 175.91 529.161 180.405C531.713 184.901 534.993 188.364 539.003 190.794C543.134 193.102 547.508 194.256 552.125 194.256C556.863 194.256 561.237 193.041 565.247 190.611C569.378 188.181 572.658 184.719 575.088 180.223C577.64 175.728 578.915 170.382 578.915 164.185Z",fill:"currentColor",className:"text-gray-700 dark:text-gray-200 group-hover:text-blue-500"}),e.jsx("path",{d:"M715.554 162.363C715.554 166.008 715.311 169.288 714.825 172.204H641.014C641.622 179.494 644.173 185.205 648.669 189.336C653.164 193.467 658.692 195.532 665.253 195.532C674.73 195.532 681.474 191.462 685.483 183.321H713.003C710.087 193.041 704.498 201.06 696.236 207.378C687.974 213.575 677.829 216.673 665.8 216.673C656.08 216.673 647.332 214.547 639.556 210.294C631.902 205.92 625.887 199.785 621.513 191.887C617.261 183.99 615.135 174.877 615.135 164.55C615.135 154.101 617.261 144.927 621.513 137.03C625.766 129.132 631.719 123.057 639.374 118.805C647.028 114.552 655.837 112.426 665.8 112.426C675.399 112.426 683.964 114.492 691.497 118.623C699.152 122.754 705.045 128.646 709.176 136.301C713.428 143.834 715.554 152.521 715.554 162.363ZM689.128 155.073C689.007 148.512 686.637 143.287 682.02 139.399C677.403 135.39 671.754 133.385 665.071 133.385C658.753 133.385 653.407 135.329 649.033 139.217C644.781 142.983 642.168 148.269 641.196 155.073H689.128Z",fill:"currentColor",className:"text-gray-700 dark:text-gray-200 group-hover:text-blue-500"}),e.jsx("path",{d:"M784.661 112.608C796.69 112.608 806.41 116.436 813.821 124.09C821.233 131.623 824.939 142.194 824.939 155.802V215.033H799.424V159.264C799.424 151.245 797.419 145.11 793.409 140.857C789.4 136.483 783.932 134.296 777.007 134.296C769.96 134.296 764.371 136.483 760.24 140.857C756.23 145.11 754.226 151.245 754.226 159.264V215.033H728.711V114.066H754.226V126.642C757.628 122.268 761.941 118.866 767.165 116.436C772.511 113.884 778.343 112.608 784.661 112.608Z",fill:"currentColor",className:"text-gray-700 dark:text-gray-200 group-hover:text-blue-500"}),e.jsx("path",{d:"M884.012 216.309C875.142 216.309 867.123 214.79 859.955 211.752C852.908 208.715 847.319 204.341 843.188 198.63C839.057 192.92 836.93 186.177 836.809 178.401H864.146C864.511 183.625 866.333 187.756 869.614 190.794C873.016 193.831 877.633 195.35 883.465 195.35C889.418 195.35 894.096 193.953 897.498 191.158C900.9 188.242 902.601 184.476 902.601 179.859C902.601 176.092 901.447 172.994 899.138 170.564C896.83 168.134 893.914 166.251 890.39 164.914C886.988 163.456 882.25 161.877 876.175 160.176C867.913 157.746 861.17 155.376 855.945 153.068C850.842 150.638 846.407 147.054 842.641 142.315C838.996 137.455 837.173 131.016 837.173 122.997C837.173 115.464 839.057 108.903 842.823 103.314C846.59 97.7247 851.875 93.4722 858.679 90.5562C865.483 87.5187 873.259 86 882.007 86C895.129 86 905.76 89.2197 913.901 95.6592C922.163 101.977 926.719 110.847 927.569 122.268H899.503C899.26 117.894 897.377 114.309 893.853 111.515C890.451 108.599 885.895 107.141 880.184 107.141C875.203 107.141 871.193 108.417 868.156 110.968C865.24 113.52 863.782 117.225 863.782 122.085C863.782 125.487 864.875 128.343 867.062 130.651C869.371 132.838 872.165 134.661 875.446 136.119C878.848 137.455 883.586 139.035 889.661 140.857C897.923 143.287 904.667 145.717 909.891 148.147C915.116 150.577 919.611 154.222 923.378 159.082C927.144 163.942 929.027 170.321 929.027 178.218C929.027 185.022 927.266 191.34 923.742 197.172C920.219 203.004 915.055 207.682 908.251 211.206C901.447 214.608 893.367 216.309 884.012 216.309Z",fill:"currentColor",className:"text-gray-700 dark:text-gray-200 group-hover:text-blue-500"}),e.jsx("path",{d:"M1037.72 162.363C1037.72 166.008 1037.47 169.288 1036.99 172.204H963.177C963.784 179.494 966.335 185.205 970.831 189.336C975.326 193.467 980.855 195.532 987.416 195.532C996.893 195.532 1003.64 191.462 1007.65 183.321H1035.17C1032.25 193.041 1026.66 201.06 1018.4 207.378C1010.14 213.575 999.991 216.673 987.962 216.673C978.242 216.673 969.495 214.547 961.719 210.294C954.064 205.92 948.05 199.785 943.676 191.887C939.423 183.99 937.297 174.877 937.297 164.55C937.297 154.101 939.423 144.927 943.676 137.03C947.928 129.132 953.882 123.057 961.536 118.805C969.191 114.552 977.999 112.426 987.962 112.426C997.561 112.426 1006.13 114.492 1013.66 118.623C1021.31 122.754 1027.21 128.646 1031.34 136.301C1035.59 143.834 1037.72 152.521 1037.72 162.363ZM1011.29 155.073C1011.17 148.512 1008.8 143.287 1004.18 139.399C999.566 135.39 993.916 133.385 987.233 133.385C980.915 133.385 975.569 135.329 971.195 139.217C966.943 142.983 964.331 148.269 963.359 155.073H1011.29Z",fill:"currentColor",className:"text-gray-700 dark:text-gray-200 group-hover:text-blue-500"}),e.jsx("path",{d:"M1046.13 164.185C1046.13 153.979 1048.14 144.927 1052.15 137.03C1056.28 129.132 1061.81 123.057 1068.73 118.805C1075.78 114.552 1083.62 112.426 1092.24 112.426C1099.78 112.426 1106.34 113.945 1111.93 116.982C1117.64 120.02 1122.19 123.847 1125.6 128.464V114.066H1151.29V215.033H1125.6V200.271C1122.31 205.009 1117.76 208.958 1111.93 212.117C1106.22 215.154 1099.59 216.673 1092.06 216.673C1083.56 216.673 1075.78 214.486 1068.73 210.112C1061.81 205.738 1056.28 199.602 1052.15 191.705C1048.14 183.686 1046.13 174.513 1046.13 164.185ZM1125.6 164.55C1125.6 158.353 1124.38 153.068 1121.95 148.694C1119.52 144.198 1116.24 140.796 1112.11 138.488C1107.98 136.058 1103.54 134.843 1098.8 134.843C1094.07 134.843 1089.69 135.997 1085.68 138.306C1081.67 140.614 1078.39 144.016 1075.84 148.512C1073.41 152.886 1072.2 158.11 1072.2 164.185C1072.2 170.26 1073.41 175.606 1075.84 180.223C1078.39 184.719 1081.67 188.181 1085.68 190.611C1089.81 193.041 1094.19 194.256 1098.8 194.256C1103.54 194.256 1107.98 193.102 1112.11 190.794C1116.24 188.364 1119.52 184.962 1121.95 180.588C1124.38 176.092 1125.6 170.746 1125.6 164.55Z",fill:"currentColor",className:"text-gray-700 dark:text-gray-200 group-hover:text-blue-500"}),e.jsx("defs",{children:e.jsx("clipPath",{id:"clip0_1_4",children:e.jsx("rect",{width:"301",height:"301",fill:"white",transform:"translate(0 0.5)"})})})]})})]})]})]})},function(e,s){return e.nft===s.nft&&e.isVoting===s.isVoting&&e.showStats===s.showStats&&e.onVote===s.onVote}),f=({isOpen:s,onClose:a})=>{const[r,l]=b.useState(""),[n,i]=b.useState(!1),[d,o]=b.useState(""),[c,x]=b.useState(null);return s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Search MetaHero NFT"}),e.jsxs("button",{onClick:a,className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:[e.jsx("span",{className:"sr-only",children:"Close"}),e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})]}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),r.trim()){i(!0),o(""),x(null);try{const e=r.replace(/[^0-9]/g,"");if(!e)throw new Error("Please enter a valid token ID");const s=await t(e);if(!s)throw new Error("NFT not found");x({...s,tokenId:e,name:s.name||`MetaHero #${e}`,image:s.image||"https://i.imgur.com/y1Fgevh.png",elo_score:s.elo_score||1e3,wins:s.wins||0,losses:s.losses||0,total_votes:(s.wins||0)+(s.losses||0)})}catch(s){o(s.message||"Failed to fetch NFT data. Please try again.")}finally{i(!1)}}},className:"mb-6",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:r,onChange:e=>l(e.target.value),placeholder:"Enter MetaHero token ID",className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400",disabled:n}),e.jsx("button",{type:"submit",disabled:n||!r.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:n?"Searching...":"Search"})]}),d&&e.jsx("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400",children:d})]}),c&&e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:c.image,alt:c.name,className:"w-full h-48 object-cover rounded-lg"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:c.name}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Token ID:"}),e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:c.tokenId})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Elo Score:"}),e.jsx("span",{className:"font-semibold text-blue-600",children:c.elo_score})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Wins:"}),e.jsx("span",{className:"font-semibold text-green-600",children:c.wins})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Losses:"}),e.jsx("span",{className:"font-semibold text-red-600",children:c.losses})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Votes:"}),e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:c.total_votes})]})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("a",{href:`https://opensea.io/assets/ethereum/0x6dc6001535e15b9def7b0f6a20a2111dfa9454e2/${c.tokenId}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-sm text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:["View on OpenSea",e.jsx("svg",{className:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})})]})]})})]})})}):null};function p({items:s,itemHeight:t,renderItem:a,overscan:r=4,style:l={}}){var n;const i=b.useRef(),[d,o]=b.useState(0),c=s.length*t,x=b.useCallback(()=>{i.current&&o(i.current.scrollTop)},[]);b.useEffect(()=>{const e=i.current;if(e)return e.addEventListener("scroll",x),()=>e.removeEventListener("scroll",x)},[x]);const h=Math.max(0,Math.floor(d/t)-r),g=Math.min(s.length,Math.ceil((d+((null==(n=i.current)?void 0:n.clientHeight)||400))/t)+r),m=s.slice(h,g);return e.jsx("div",{ref:i,style:{overflowY:"auto",position:"relative",height:"100%",...l},tabIndex:0,children:e.jsx("div",{style:{height:c,position:"relative"},children:m.map((s,r)=>{const l=h+r;return e.jsx("div",{style:{position:"absolute",top:l*t,left:0,right:0,height:t,width:"100%"},children:a(s,l)},s.tokenId||l)})})})}const y=()=>{const[s,t]=b.useState({topNFTs:[],bottomNFTs:[]}),[l,n]=b.useState(!0),[i,d]=b.useState(null),[o,c]=b.useState(Date.now()),[x,h]=b.useState(!1),[g,m]=b.useState(!1);b.useEffect(()=>{const e=setInterval(()=>{Date.now()-o>3e5&&h(!0)},6e4);return()=>clearInterval(e)},[o]),b.useEffect(()=>{u()},[]);const u=b.useCallback(async(e=!1)=>{try{n(!0),d(null);const s=await a(10,e);t(s),c(Date.now()),h(!1)}catch(s){try{const e=await r();e?t(e):d("Failed to load leaderboard")}catch(l){d("Failed to load leaderboard")}}finally{n(!1)}},[]),j=({title:s,nfts:t,isTop:a=!0})=>e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3 flex items-center",children:[a?"🏆":"💀"," ",s]}),e.jsx("div",{style:{height:Math.min(56*t.length,560),maxHeight:560},children:e.jsx(p,{items:t,itemHeight:56,overscan:4,renderItem:(s,r)=>e.jsxs("div",{className:"flex items-center gap-3 p-2 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",style:{height:"56px"},children:[e.jsx("div",{className:"flex-shrink-0 w-8 text-center",children:e.jsx("span",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:a?r+1:s.actualRank||""+(t.length-r)})}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:s.image,alt:s.name,className:"w-12 h-12 object-cover rounded-lg",loading:"lazy"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600 dark:text-gray-400",children:[e.jsxs("span",{className:"font-semibold",children:["Elo: ",s.elo_score]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:[s.wins,"W-",s.losses,"L"]})]})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("a",{href:s.opensea_url||`https://opensea.io/assets/ethereum/0x6dc6001535e15b9def7b0f6a20a2111dfa9454e2/${s.tokenId}`,target:"_blank",rel:"noopener noreferrer",className:"p-1.5 text-gray-400 hover:text-blue-500 dark:text-gray-400 dark:hover:text-blue-400 transition-colors","aria-label":"View on OpenSea",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})})})]},s.tokenId)})})]});return l?e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-300 dark:bg-gray-600 rounded mb-4"}),[...Array(5)].map((s,t)=>e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-6 h-4 bg-gray-300 dark:bg-gray-600 rounded"}),e.jsx("div",{className:"w-12 h-12 bg-gray-300 dark:bg-gray-600 rounded-lg"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded mb-1"}),e.jsx("div",{className:"h-3 bg-gray-300 dark:bg-gray-600 rounded w-2/3"})]})]},t))]})}):i?e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-500 mb-4",children:i}),e.jsx("button",{onClick:u,className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors",children:"Retry"})]})}):e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 h-fit sticky top-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Leaderboard"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("button",{onClick:()=>m(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 text-sm font-medium transition-colors flex items-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Search NFT by ID"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[x&&e.jsx("span",{className:"text-xs text-blue-500 mr-2",children:"New data available"}),e.jsx("button",{onClick:()=>u(!0),className:`p-2 ${x?"text-blue-500 hover:text-blue-700":"text-gray-500 hover:text-gray-700"} dark:text-gray-400 dark:hover:text-gray-200 transition-colors`,title:"Refresh leaderboard",disabled:!x,children:e.jsx("svg",{className:"w-5 h-5 "+(x?"animate-pulse":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(j,{title:"Top Heroes",nfts:s.topNFTs,isTop:!0}),e.jsx(j,{title:"Absolute Zeroes",nfts:s.bottomNFTs,isTop:!1})]}),e.jsx(f,{isOpen:g,onClose:()=>m(!1)})]})},v=({winner:s,loser:t,ratingChanges:a,onNextPair:r})=>s&&t&&a?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 dark:text-white mb-6",children:"Vote Results"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-64 object-cover rounded-lg"}),e.jsx("div",{className:"absolute top-2 left-2 bg-green-500 text-white px-3 py-1 rounded-full font-semibold",children:"🦸 HERO"})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:s.name}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Elo Score:"}),e.jsxs("span",{className:"font-semibold text-green-600",children:[s.elo_score,e.jsxs("span",{className:"text-green-500 ml-1",children:["(+",a.winnerChange,")"]})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Wins:"}),e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:s.wins})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Losses:"}),e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:s.losses})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Votes:"}),e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:s.total_votes})]})]})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx("img",{src:t.image,alt:t.name,className:"w-full h-64 object-cover rounded-lg opacity-75"}),e.jsx("div",{className:"absolute top-2 left-2 bg-red-500 text-white px-3 py-1 rounded-full font-semibold",children:"💀 ZERO"})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:t.name}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Elo Score:"}),e.jsxs("span",{className:"font-semibold text-red-600",children:[t.elo_score,e.jsxs("span",{className:"text-red-500 ml-1",children:["(",a.loserChange,")"]})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Wins:"}),e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:t.wins})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Losses:"}),e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:t.losses})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Votes:"}),e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:t.total_votes})]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Rating Changes"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"text-green-600 font-semibold",children:[s.name,": +",a.winnerChange]})}),e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"text-red-600 font-semibold",children:[t.name,": ",a.loserChange]})})]})]}),e.jsx("div",{className:"text-center",children:e.jsx("button",{onClick:r,className:"px-8 py-3 bg-blue-500 hover:bg-blue-600 text-white font-semibold rounded-lg transition-colors duration-200 transform hover:scale-105",children:"Next Pair →"})})]})})}):null;class N extends b.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,s){this.setState({error:e,errorInfo:s})}render(){var s;return this.state.hasError?e.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:[e.jsx("h2",{className:"text-lg font-semibold text-red-800 dark:text-red-200 mb-2",children:"Something went wrong."}),e.jsxs("details",{className:"text-sm text-red-700 dark:text-red-300",children:[this.state.error&&this.state.error.toString(),e.jsx("br",{}),null==(s=this.state.errorInfo)?void 0:s.componentStack]}),e.jsx("button",{className:"mt-4 px-4 py-2 bg-red-100 dark:bg-red-800 text-red-800 dark:text-red-100 rounded hover:bg-red-200 dark:hover:bg-red-700 transition-colors",onClick:()=>{this.setState({hasError:!1,error:null,errorInfo:null}),window.location.reload()},children:"Reload Page"})]}):this.props.children}}const C=()=>e.jsxs("footer",{className:"mt-12 py-6 bg-gray-50 dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 text-center text-gray-700 dark:text-gray-300 text-sm",children:[e.jsx("div",{className:"mb-2 font-semibold text-base text-gray-800 dark:text-gray-100",children:"Your Tips Help Support This Site!"}),e.jsxs("div",{className:"flex flex-col items-center gap-1 mb-2",children:[e.jsxs("span",{children:[e.jsx("span",{className:"font-bold",children:"SOL:"})," E7AUwAjXoacTSrqKMg5Ycnwhn6boMbc8tpEhbrKUviAw"]}),e.jsxs("span",{children:[e.jsx("span",{className:"font-bold",children:"ETH:"})," 0xd919d5304BE87E3159f6b1Cbd5516822F407B6eC"]}),e.jsxs("span",{children:[e.jsx("span",{className:"font-bold",children:"BTC:"})," bc1qs8nrgl4h3u0gje0acaufpufmumvxql7cvgfhej"]})]}),e.jsx("div",{className:"flex justify-center items-center gap-2 mt-2",children:e.jsxs("a",{href:"https://x.com/ruffriderx",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1200 1227",className:"w-5 h-5",fill:"currentColor",children:e.jsx("path",{d:"M1199.6 0 741 555.7 1199.6 1227H872.9L563.4 792.8 214.2 1227H0l485.8-594.7L43.6 0h337.7l261.2 366.2L985.8 0h213.8ZM917.7 1106.6h109.6L293.4 120.4h-114L917.7 1106.6Z"})}),e.jsx("span",{children:"Follow me on X"})]})})]}),w=()=>{const[s,t]=b.useState([null,null]),[a,r]=b.useState(!0),[m,u]=b.useState(!1),[f,p]=b.useState(null),[N,C]=b.useState(null),[w]=b.useState(()=>l()),[k,S]=b.useState(!1),{currentUser:H}=n();b.useEffect(()=>{i().catch(e=>{});const e=setInterval(()=>{d().catch(e=>{})},18e5);return()=>clearInterval(e)},[]),b.useEffect(()=>{M(),o(5).catch(e=>{})},[]);const M=b.useCallback(async()=>{try{r(!0),p(null);let s,a,l=0;for(;;){try{if(s=await c(!0),!(s&&Array.isArray(s)&&2===s.length&&s[0]&&s[1]))throw new Error("Invalid NFT pair received");if(!(await x(s[0].tokenId,s[1].tokenId,w)))break}catch(e){a=e}if(l++,l>=5){if(s)break;throw a||new Error("Failed to load valid NFT pair after multiple attempts")}}t(s),o().catch(e=>{})}catch(e){p("Failed to load NFTs. Please try again."),t([null,null])}finally{r(!1)}},[w]),V=b.useCallback(async e=>{if(!m&&s[0]&&s[1])try{u(!0);const t=s[0].tokenId===e?s[1].tokenId:s[0].tokenId;o().catch(e=>{});const a=await h(e,t,w);C(a),u(!1)}catch(t){p("Failed to record vote. Please try again."),u(!1)}},[s,m,w]),I=b.useCallback(()=>{C(null),u(!1),M(),o().catch(e=>{})},[M]);return a?e.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 py-8",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:"Hero or Zero"}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:"Vote on MetaHero NFTs in head-to-head battles"})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 animate-pulse",children:[e.jsx("div",{className:"w-full h-64 bg-gray-300 dark:bg-gray-600 rounded-lg mb-4"}),e.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded mb-2"}),e.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded w-2/3"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 animate-pulse",children:[e.jsx("div",{className:"w-full h-64 bg-gray-300 dark:bg-gray-600 rounded-lg mb-4"}),e.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded mb-2"}),e.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded w-2/3"})]})]})}),e.jsx("div",{className:"lg:w-80",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-300 dark:bg-gray-600 rounded mb-4"}),e.jsx("div",{className:"space-y-3",children:[...Array(5)].map((s,t)=>e.jsx("div",{className:"h-16 bg-gray-300 dark:bg-gray-600 rounded"},t))})]})})]})]})}):f?e.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 py-8",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:"Hero or Zero"}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8 max-w-md mx-auto",children:[e.jsx("p",{className:"text-red-500 mb-4",children:f}),e.jsx("button",{onClick:M,className:"px-6 py-3 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors",children:"Try Again"})]})]})})}):e.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 py-8",children:[e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:"Hero or Zero"}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400 mb-2",children:"Vote on MetaHero NFTs in head-to-head battles"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 max-w-2xl mx-auto",children:["Select your preferred NFT as the ",e.jsx("span",{className:"font-semibold text-blue-500",children:"Hero"})," in each battle."]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx("div",{className:"flex-1",children:s[0]&&s[1]?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative flex flex-col md:flex-row items-center justify-center gap-4 md:gap-12",children:[e.jsx("div",{className:"w-full md:w-5/12",children:e.jsx(j,{nft:s[0],onVote:V,isVoting:m,showStats:!0})}),e.jsx("div",{className:"hidden md:flex items-center justify-center",children:e.jsx("div",{className:"flex items-center justify-center w-24 h-24 bg-gradient-to-r from-red-500 to-green-500 rounded-full text-white font-bold text-2xl shadow-lg",children:"VS"})}),e.jsx("div",{className:"md:hidden my-4",children:e.jsx("div",{className:"flex items-center justify-center w-16 h-16 bg-gradient-to-r from-red-500 to-green-500 rounded-full text-white font-bold text-xl shadow-md",children:"VS"})}),e.jsx("div",{className:"w-full md:w-5/12",children:e.jsx(j,{nft:s[1],onVote:V,isVoting:m,showStats:!0})})]}),e.jsxs("div",{className:"text-center mt-8",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"font-semibold text-blue-800 dark:text-blue-200 mb-2",children:"How to Vote"}),e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:["Click the ",e.jsx("span",{className:"font-semibold",children:"MetaHero you prefer"}),"."]})]}),e.jsx("button",{onClick:M,disabled:m,className:"px-4 py-2 text-sm bg-gray-500 hover:bg-gray-600 text-white rounded-lg transition-colors disabled:opacity-50",children:"Skip This Pair"})]})]}):e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No NFTs available for voting"})})}),e.jsx("div",{className:"lg:w-80",children:e.jsx(y,{})})]})]}),N&&e.jsx(v,{winner:N.winner,loser:N.loser,ratingChanges:{winnerChange:N.winner.change,loserChange:N.loser.change},onNextPair:I}),k&&e.jsx(g,{isOpen:k,onClose:()=>S(!1)})]})},k=()=>e.jsxs("div",{className:"flex flex-col min-h-screen",children:[e.jsx("div",{className:"flex-grow",children:e.jsx(N,{children:e.jsx(w,{})})}),e.jsx(C,{})]});export{k as default};
